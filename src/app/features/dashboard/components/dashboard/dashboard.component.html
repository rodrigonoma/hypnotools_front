<div class="dashboard-container">
  <!-- Header -->
  <mat-toolbar color="primary" class="dashboard-header">
    <span class="app-title">
      <mat-icon>business_center</mat-icon>
      HypnoTools
    </span>

    <span class="spacer"></span>

    <!-- Informações do usuário -->
    <div class="user-info" *ngIf="currentUser$ | async as user">
      <span class="user-greeting">{{ getGreeting() }}, {{ user.nome }}!</span>
      <span class="user-empresa" *ngIf="empresa$ | async as empresa">
        <mat-icon>business</mat-icon>
        {{ empresa }}
      </span>
    </div>

    <!-- Botão de logout -->
    <button mat-icon-button (click)="logout()" matTooltip="Sair">
      <mat-icon>logout</mat-icon>
    </button>
  </mat-toolbar>

  <!-- Conteúdo principal -->
  <div class="dashboard-content">
    <!-- Bem-vindo -->
    <div class="welcome-section">
      <h1 class="welcome-title">Sistema de Integração ERP</h1>
      <p class="welcome-subtitle">
        Centralize e gerencie todas as funcionalidades de integração com sistemas ERP
      </p>
    </div>

    <!-- Grid de funcionalidades -->
    <div class="funcionalidades-grid">
      <mat-card
        *ngFor="let func of funcionalidades"
        class="funcionalidade-card"
        [class.disabled]="!func.disponivel"
        (click)="navegarPara(func.rota, func.disponivel)">

        <mat-card-header>
          <div class="card-icon" [ngClass]="func.cor">
            <mat-icon>{{ func.icone }}</mat-icon>
          </div>
          <mat-card-title>{{ func.titulo }}</mat-card-title>
        </mat-card-header>

        <mat-card-content>
          <p>{{ func.descricao }}</p>
        </mat-card-content>

        <mat-card-actions align="end">
          <button
            mat-button
            [color]="func.cor"
            [disabled]="!func.disponivel">
            <span *ngIf="func.disponivel">Acessar</span>
            <span *ngIf="!func.disponivel">Em breve</span>
            <mat-icon *ngIf="func.disponivel">arrow_forward</mat-icon>
          </button>
        </mat-card-actions>

        <!-- Overlay para funcionalidades indisponíveis -->
        <div class="disabled-overlay" *ngIf="!func.disponivel">
          <mat-icon>construction</mat-icon>
          <span>Em desenvolvimento</span>
        </div>
      </mat-card>
    </div>

    <!-- Seção de informações -->
    <div class="info-section">
      <mat-card class="info-card">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>info</mat-icon>
            Informações do Sistema
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="info-grid">
            <div class="info-item">
              <strong>Versão:</strong> 1.0.0
            </div>
            <div class="info-item" *ngIf="empresa$ | async as empresa">
              <strong>Empresa Ativa:</strong> {{ empresa }}
            </div>
            <div class="info-item" *ngIf="currentUser$ | async as user">
              <strong>Usuário:</strong> {{ user.email }}
            </div>
            <div class="info-item">
              <strong>Última Atualização:</strong> {{ getCurrentDate() | date:'dd/MM/yyyy HH:mm' }}
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>